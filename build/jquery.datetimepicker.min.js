!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-mousewheel","date-functions"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){"use strict";function t(e,t,n){this.date=e,this.desc=t,this.style=n}var n={i18n:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},value:"",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1},o="en",a="en";e.datetimepicker={setLocale:function(e){a=n.i18n[e]?e:o,Date.monthNames=n.i18n[a].months,Date.dayNames=n.i18n[a].dayOfWeek}},window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(e,t,n){return n.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,o;for(n=t||0,o=this.length;o>n;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n,o,a,i,s,r=e(this),d=function(e){var t,n={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.clientX,n.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(n.x=e.clientX,n.y=e.clientY),n},l=100,c=!1,u=0,f=0,m=0,h=!1,g=0,p=function(){};return"hide"===t?void r.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(n=r.children().eq(0),o=r[0].clientHeight,a=n[0].offsetHeight,i=e('<div class="xdsoft_scrollbar"></div>'),s=e('<div class="xdsoft_scroller"></div>'),i.append(s),r.addClass("xdsoft_scroller_box").append(i),p=function(e){var t=d(e).y-u+g;0>t&&(t=0),t+s[0].offsetHeight>m&&(t=m-s[0].offsetHeight),r.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){o||r.trigger("resize_scroll.xdsoft_scroller",[t]),u=d(n).y,g=parseInt(s.css("margin-top"),10),m=i[0].offsetHeight,"mousedown"===n.type||"touchstart"===n.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("touchend mouseup.xdsoft_scroller",function a(){e([document.body,window]).off("touchend mouseup.xdsoft_scroller",a).off("mousemove.xdsoft_scroller",p).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",p)):(h=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){h&&(e.preventDefault(),p(e))}).on("touchend touchcancel",function(){h=!1,g=0}),r.on("scroll_element.xdsoft_scroller",function(e,t){o||r.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,s.css("margin-top",l*t),setTimeout(function(){n.css("marginTop",-parseInt((n[0].offsetHeight-o)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,d){var c,u;o=r[0].clientHeight,a=n[0].offsetHeight,c=o/a,u=c*i[0].offsetHeight,c>1?s.hide():(s.show(),s.css("height",parseInt(u>10?u:10,10)),l=i[0].offsetHeight-s[0].offsetHeight,d!==!0&&r.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(n.css("marginTop"),10))/(a-o)]))}),r.on("mousewheel",function(e){var t=Math.abs(parseInt(n.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),r.trigger("scroll_element.xdsoft_scroller",[t/(a-o)]),e.stopPropagation(),!1}),r.on("touchstart",function(e){c=d(e),f=Math.abs(parseInt(n.css("marginTop"),10))}),r.on("touchmove",function(e){if(c){e.preventDefault();var t=d(e);r.trigger("scroll_element.xdsoft_scroller",[(f-(t.y-c.y))/(a-o)])}}),r.on("touchend touchcancel",function(){c=!1,f=0})),void r.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(o){var i,s,r=48,d=57,l=96,c=105,u=17,f=46,m=13,h=27,g=8,p=37,x=38,v=39,T=40,D=9,y=116,w=65,_=67,b=86,k=90,M=89,S=!1,C=e.isPlainObject(o)||!o?e.extend(!0,{},n,o):e.extend(!0,{},n),F=0,O=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(F),F=setTimeout(function(){e.data("xdsoft_datetimepicker")||i(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100))})};return i=function(n){function i(){var e,t=!1;return C.startDate?t=I.strToDate(C.startDate):(t=C.value||(n&&n.val&&n.val()?n.val():""),t?t=I.strToDateTime(t):C.defaultDate&&(t=I.strToDateTime(C.defaultDate),C.defaultTime&&(e=I.strtotime(C.defaultTime),t.setHours(e.getHours()),t.setMinutes(e.getMinutes())))),t&&I.isValidDate(t)?W.data("changed",!0):t="",t||0}var s,F,O,Y,H,I,W=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),P=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),A=e('<div class="xdsoft_datepicker active"></div>'),B=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),q=e('<div class="xdsoft_calendar"></div>'),j=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),N=j.find(".xdsoft_time_box").eq(0),V=e('<div class="xdsoft_time_variant"></div>'),z=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),E=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),R=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),$=!1,L=0,G=0;C.id&&W.attr("id",C.id),C.style&&W.attr("style",C.style),C.weeks&&W.addClass("xdsoft_showweeks"),C.rtl&&W.addClass("xdsoft_rtl"),W.addClass("xdsoft_"+C.theme),W.addClass(C.className),B.find(".xdsoft_month span").after(E),B.find(".xdsoft_year span").after(R),B.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var n,o,a=e(this).find(".xdsoft_select").eq(0),i=0,s=0,r=a.is(":visible");for(B.find(".xdsoft_select").hide(),I.currentTime&&(i=I.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),a[r?"hide":"show"](),n=a.find("div.xdsoft_option"),o=0;o<n.length&&n.eq(o).data("value")!==i;o+=1)s+=n[0].offsetHeight;return a.xdsoftScroller(s/(a.children()[0].offsetHeight-a[0].clientHeight)),t.stopPropagation(),!1}),B.find(".xdsoft_select").xdsoftScroller().on("touchstart mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("touchstart mousedown.xdsoft",".xdsoft_option",function(){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());var t=I.currentTime.getFullYear();I&&I.currentTime&&I.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),W.trigger("xchange.xdsoft"),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(W,I.currentTime,W.data("input")),t!==I.currentTime.getFullYear()&&e.isFunction(C.onChangeYear)&&C.onChangeYear.call(W,I.currentTime,W.data("input"))}),W.setOptions=function(o){var a={},i=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},s=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},F=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(t)};C=e.extend(!0,{},C,o),o.allowTimes&&e.isArray(o.allowTimes)&&o.allowTimes.length&&(C.allowTimes=e.extend(!0,[],o.allowTimes)),o.weekends&&e.isArray(o.weekends)&&o.weekends.length&&(C.weekends=e.extend(!0,[],o.weekends)),o.highlightedDates&&e.isArray(o.highlightedDates)&&o.highlightedDates.length&&(e.each(o.highlightedDates,function(n,o){var i,s=e.map(o.split(","),e.trim),r=new t(Date.parseDate(s[0],C.formatDate),s[1],s[2]),d=r.date.dateFormat(C.formatDate);void 0!==a[d]?(i=a[d].desc,i&&i.length&&r.desc&&r.desc.length&&(a[d].desc=i+"\n"+r.desc)):a[d]=r}),C.highlightedDates=e.extend(!0,[],a)),o.highlightedPeriods&&e.isArray(o.highlightedPeriods)&&o.highlightedPeriods.length&&(a=e.extend(!0,[],C.highlightedDates),e.each(o.highlightedPeriods,function(n,o){var i,s,r,d,l,c,u;if(e.isArray(o))i=o[0],s=o[1],r=o[2],u=o[3];else{var f=e.map(o.split(","),e.trim);i=Date.parseDate(f[0],C.formatDate),s=Date.parseDate(f[1],C.formatDate),r=f[2],u=f[3]}for(;s>=i;)d=new t(i,r,u),l=i.dateFormat(C.formatDate),i.setDate(i.getDate()+1),void 0!==a[l]?(c=a[l].desc,c&&c.length&&d.desc&&d.desc.length&&(a[l].desc=c+"\n"+d.desc)):a[l]=d}),C.highlightedDates=e.extend(!0,[],a)),o.disabledDates&&e.isArray(o.disabledDates)&&o.disabledDates.length&&(C.disabledDates=e.extend(!0,[],o.disabledDates)),o.disabledWeekDays&&e.isArray(o.disabledWeekDays)&&o.disabledWeekDays.length&&(C.disabledWeekDays=e.extend(!0,[],o.disabledWeekDays)),!C.open&&!C.opened||C.inline||n.trigger("open.xdsoft"),C.inline&&($=!0,W.addClass("xdsoft_inline"),n.after(W).hide()),C.inverseButton&&(C.next="xdsoft_prev",C.prev="xdsoft_next"),C.datepicker?A.addClass("active"):A.removeClass("active"),C.timepicker?j.addClass("active"):j.removeClass("active"),C.value&&(I.setCurrentTime(C.value),n&&n.val&&n.val(I.str)),C.dayOfWeekStart=isNaN(C.dayOfWeekStart)?0:parseInt(C.dayOfWeekStart,10)%7,C.timepickerScrollbar||N.xdsoftScroller("hide"),C.minDate&&/^[\+\-](.*)$/.test(C.minDate)&&(C.minDate=I.strToDateTime(C.minDate).dateFormat(C.formatDate)),C.maxDate&&/^[\+\-](.*)$/.test(C.maxDate)&&(C.maxDate=I.strToDateTime(C.maxDate).dateFormat(C.formatDate)),z.toggle(C.showApplyButton),B.find(".xdsoft_today_button").css("visibility",C.todayButton?"visible":"hidden"),B.find("."+C.prev).css("visibility",C.prevButton?"visible":"hidden"),B.find("."+C.next).css("visibility",C.nextButton?"visible":"hidden"),C.mask&&(n.off("keydown.xdsoft"),C.mask===!0&&(C.mask=C.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(C.mask)&&(F(C.mask,n.val())||(n.val(C.mask.replace(/[0-9]/g,"_")),s(n[0],0)),n.on("keydown.xdsoft",function(t){var o,a,O=this.value,Y=t.which;if(Y>=r&&d>=Y||Y>=l&&c>=Y||Y===g||Y===f){for(o=i(this),a=Y!==g&&Y!==f?String.fromCharCode(Y>=l&&c>=Y?Y-r:Y):"_",Y!==g&&Y!==f||!o||(o-=1,a="_");/[^0-9_]/.test(C.mask.substr(o,1))&&o<C.mask.length&&o>0;)o+=Y===g||Y===f?-1:1;if(O=O.substr(0,o)+a+O.substr(o+1),""===e.trim(O))O=C.mask.replace(/[0-9]/g,"_");else if(o===C.mask.length)return t.preventDefault(),!1;for(o+=Y===g||Y===f?0:1;/[^0-9_]/.test(C.mask.substr(o,1))&&o<C.mask.length&&o>0;)o+=Y===g||Y===f?-1:1;F(C.mask,O)?(this.value=O,s(this,o)):""===e.trim(O)?this.value=C.mask.replace(/[0-9]/g,"_"):n.trigger("error_input.xdsoft")}else if(-1!==[w,_,b,k,M].indexOf(Y)&&S||-1!==[h,x,T,p,v,y,u,D,m].indexOf(Y))return!0;return t.preventDefault(),!1}))),C.validateOnBlur&&n.off("blur.xdsoft").on("blur.xdsoft",function(){if(C.allowBlank&&!e.trim(e(this).val()).length)e(this).val(null),W.data("xdsoft_datetime").empty();else if(Date.parseDate(e(this).val(),C.format))W.data("xdsoft_datetime").setCurrentTime(e(this).val());else{var t=+[e(this).val()[0],e(this).val()[1]].join(""),n=+[e(this).val()[2],e(this).val()[3]].join("");e(this).val(!C.datepicker&&C.timepicker&&t>=0&&24>t&&n>=0&&60>n?[t,n].map(function(e){return e>9?e:"0"+e}).join(":"):I.now().dateFormat(C.format)),W.data("xdsoft_datetime").setCurrentTime(e(this).val())}W.trigger("changedatetime.xdsoft")}),C.dayOfWeekStartPrev=0===C.dayOfWeekStart?6:C.dayOfWeekStart-1,W.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},W.data("options",C).on("touchstart mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),R.hide(),E.hide(),!1}),N.append(V),N.xdsoftScroller(),W.on("afterOpen.xdsoft",function(){N.xdsoftScroller()}),W.append(A).append(j),C.withoutCopyright!==!0&&W.append(P),A.append(B).append(q).append(z),e(C.parentID).append(W),s=function(){var t=this;t.now=function(e){var n,o,a=new Date;return!e&&C.defaultDate&&(n=t.strToDateTime(C.defaultDate),a.setFullYear(n.getFullYear()),a.setMonth(n.getMonth()),a.setDate(n.getDate())),C.yearOffset&&a.setFullYear(a.getFullYear()+C.yearOffset),!e&&C.defaultTime&&(o=t.strtotime(C.defaultTime),a.setHours(o.getHours()),a.setMinutes(o.getMinutes())),a},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),W.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(){return t.currentTime},t.nextMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var n,o=t.currentTime.getMonth()+1;return 12===o&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),o=0),n=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),o+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(o),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(W,I.currentTime,W.data("input")),n!==t.currentTime.getFullYear()&&e.isFunction(C.onChangeYear)&&C.onChangeYear.call(W,I.currentTime,W.data("input")),W.trigger("xchange.xdsoft"),o},t.prevMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var n=t.currentTime.getMonth()-1;return-1===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),n=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),C.onChangeMonth&&e.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(W,I.currentTime,W.data("input")),W.trigger("xchange.xdsoft"),n},t.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},t.strToDateTime=function(e){var n,o,a=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(a=/^(\+|\-)(.*)$/.exec(e),a&&(a[2]=Date.parseDate(a[2],C.formatDate)),a&&a[2]?(n=a[2].getTime()-6e4*a[2].getTimezoneOffset(),o=new Date(t.now(!0).getTime()+parseInt(a[1]+"1",10)*n)):o=e?Date.parseDate(e,C.format):t.now(),t.isValidDate(o)||(o=t.now()),o)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,C.formatDate):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,C.formatTime):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.str=function(){return t.currentTime.dateFormat(C.format)},t.currentTime=this.now()},I=new s,z.on("touchend click",function(e){e.preventDefault(),W.data("changed",!0),I.setCurrentTime(i()),n.val(I.str()),W.trigger("close.xdsoft")}),B.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){W.data("changed",!0),I.setCurrentTime(0),W.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,t,o=I.getCurrentTime();o=new Date(o.getFullYear(),o.getMonth(),o.getDate()),e=I.strToDate(C.minDate),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e>o||(t=I.strToDate(C.maxDate),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o>t||(n.val(I.str()),n.trigger("change"),W.trigger("close.xdsoft")))}),B.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),n=0,o=!1;!function a(e){t.hasClass(C.next)?I.nextMonth():t.hasClass(C.prev)&&I.prevMonth(),C.monthChangeSpinner&&(o||(n=setTimeout(a,e||100)))}(500),e([document.body,window]).on("touchend mouseup.xdsoft",function i(){clearTimeout(n),o=!0,e([document.body,window]).off("touchend mouseup.xdsoft",i)})}),j.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),n=0,o=!1,a=110;!function i(e){var s=N[0].clientHeight,r=V[0].offsetHeight,d=Math.abs(parseInt(V.css("marginTop"),10));t.hasClass(C.next)&&r-s-C.timeHeightInTimePicker>=d?V.css("marginTop","-"+(d+C.timeHeightInTimePicker)+"px"):t.hasClass(C.prev)&&d-C.timeHeightInTimePicker>=0&&V.css("marginTop","-"+(d-C.timeHeightInTimePicker)+"px"),N.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(V.css("marginTop"),10)/(r-s))]),a=a>10?10:a-10,o||(n=setTimeout(i,e||a))}(500),e([document.body,window]).on("touchend mouseup.xdsoft",function s(){clearTimeout(n),o=!0,e([document.body,window]).off("touchend mouseup.xdsoft",s)})}),F=0,W.on("xchange.xdsoft",function(t){clearTimeout(F),F=setTimeout(function(){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());for(var t,n,i,s,r,d,l,c,u,f,m="",h=new Date(I.currentTime.getFullYear(),I.currentTime.getMonth(),1,12,0,0),g=0,p=I.now(),x=!1,v=!1,T=[],D=!0,y="",w="";h.getDay()!==C.dayOfWeekStart;)h.setDate(h.getDate()-1);for(m+="<table><thead><tr>",C.weeks&&(m+="<th></th>"),t=0;7>t;t+=1)m+="<th>"+C.i18n[a].dayOfWeekShort[(t+C.dayOfWeekStart)%7]+"</th>";for(m+="</tr></thead>",m+="<tbody>",C.maxDate!==!1&&(x=I.strToDate(C.maxDate),x=new Date(x.getFullYear(),x.getMonth(),x.getDate(),23,59,59,999)),C.minDate!==!1&&(v=I.strToDate(C.minDate),v=new Date(v.getFullYear(),v.getMonth(),v.getDate()));g<I.currentTime.countDaysInMonth()||h.getDay()!==C.dayOfWeekStart||I.currentTime.getMonth()===h.getMonth();)T=[],g+=1,i=h.getDay(),s=h.getDate(),r=h.getFullYear(),d=h.getMonth(),l=I.getWeekOfYear(h),f="",T.push("xdsoft_date"),c=C.beforeShowDay&&e.isFunction(C.beforeShowDay.call)?C.beforeShowDay.call(W,h):null,x!==!1&&h>x||v!==!1&&v>h||c&&c[0]===!1?T.push("xdsoft_disabled"):-1!==C.disabledDates.indexOf(h.dateFormat(C.formatDate))?T.push("xdsoft_disabled"):-1!==C.disabledWeekDays.indexOf(i)&&T.push("xdsoft_disabled"),c&&""!==c[1]&&T.push(c[1]),I.currentTime.getMonth()!==d&&T.push("xdsoft_other_month"),(C.defaultSelect||W.data("changed"))&&I.currentTime.dateFormat(C.formatDate)===h.dateFormat(C.formatDate)&&T.push("xdsoft_current"),p.dateFormat(C.formatDate)===h.dateFormat(C.formatDate)&&T.push("xdsoft_today"),(0===h.getDay()||6===h.getDay()||-1!==C.weekends.indexOf(h.dateFormat(C.formatDate)))&&T.push("xdsoft_weekend"),void 0!==C.highlightedDates[h.dateFormat(C.formatDate)]&&(n=C.highlightedDates[h.dateFormat(C.formatDate)],T.push(void 0===n.style?"xdsoft_highlighted_default":n.style),f=void 0===n.desc?"":n.desc),C.beforeShowDay&&e.isFunction(C.beforeShowDay)&&T.push(C.beforeShowDay(h)),D&&(m+="<tr>",D=!1,C.weeks&&(m+="<th>"+l+"</th>")),m+='<td data-date="'+s+'" data-month="'+d+'" data-year="'+r+'" class="xdsoft_date xdsoft_day_of_week'+h.getDay()+" "+T.join(" ")+'" title="'+f+'"><div>'+s+"</div></td>",h.getDay()===C.dayOfWeekStartPrev&&(m+="</tr>",D=!0),h.setDate(s+1);if(m+="</tbody></table>",q.html(m),B.find(".xdsoft_label span").eq(0).text(C.i18n[a].months[I.currentTime.getMonth()]),B.find(".xdsoft_label span").eq(1).text(I.currentTime.getFullYear()),y="",w="",d="",u=function(t,n){var o,a,i=I.now(),s=C.allowTimes&&e.isArray(C.allowTimes)&&C.allowTimes.length;i.setHours(t),t=parseInt(i.getHours(),10),i.setMinutes(n),n=parseInt(i.getMinutes(),10),o=new Date(I.currentTime),o.setHours(t),o.setMinutes(n),T=[],(C.minDateTime!==!1&&C.minDateTime>o||C.maxTime!==!1&&I.strtotime(C.maxTime).getTime()<i.getTime()||C.minTime!==!1&&I.strtotime(C.minTime).getTime()>i.getTime())&&T.push("xdsoft_disabled"),(C.minDateTime!==!1&&C.minDateTime>o||C.disabledMinTime!==!1&&i.getTime()>I.strtotime(C.disabledMinTime).getTime()&&C.disabledMaxTime!==!1&&i.getTime()<I.strtotime(C.disabledMaxTime).getTime())&&T.push("xdsoft_disabled"),a=new Date(I.currentTime),a.setHours(parseInt(I.currentTime.getHours(),10)),s||a.setMinutes(Math[C.roundTime](I.currentTime.getMinutes()/C.step)*C.step),(C.initTime||C.defaultSelect||W.data("changed"))&&a.getHours()===parseInt(t,10)&&(!s&&C.step>59||a.getMinutes()===parseInt(n,10))&&(C.defaultSelect||W.data("changed")?T.push("xdsoft_current"):C.initTime&&T.push("xdsoft_init_time")),parseInt(p.getHours(),10)===parseInt(t,10)&&parseInt(p.getMinutes(),10)===parseInt(n,10)&&T.push("xdsoft_today"),y+='<div class="xdsoft_time '+T.join(" ")+'" data-hour="'+t+'" data-minute="'+n+'">'+i.dateFormat(C.formatTime)+"</div>"},C.allowTimes&&e.isArray(C.allowTimes)&&C.allowTimes.length)for(g=0;g<C.allowTimes.length;g+=1)w=I.strtotime(C.allowTimes[g]).getHours(),d=I.strtotime(C.allowTimes[g]).getMinutes(),u(w,d);else for(g=0,t=0;g<(C.hours12?12:24);g+=1)for(t=0;60>t;t+=C.step)w=(10>g?"0":"")+g,d=(10>t?"0":"")+t,u(w,d);for(V.html(y),o="",g=0,g=parseInt(C.yearStart,10)+C.yearOffset;g<=parseInt(C.yearEnd,10)+C.yearOffset;g+=1)o+='<div class="xdsoft_option '+(I.currentTime.getFullYear()===g?"xdsoft_current":"")+'" data-value="'+g+'">'+g+"</div>";for(R.children().eq(0).html(o),g=parseInt(C.monthStart,10),o="";g<=parseInt(C.monthEnd,10);g+=1)o+='<div class="xdsoft_option '+(I.currentTime.getMonth()===g?"xdsoft_current":"")+'" data-value="'+g+'">'+C.i18n[a].months[g]+"</div>";E.children().eq(0).html(o),e(W).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(C.timepicker){var e,t,n,o;V.find(".xdsoft_current").length?e=".xdsoft_current":V.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=N[0].clientHeight,n=V[0].offsetHeight,o=V.find(e).index()*C.timeHeightInTimePicker+1,o>n-t&&(o=n-t),N.trigger("scroll_element.xdsoft_scroller",[parseInt(o,10)/(n-t)])):N.trigger("scroll_element.xdsoft_scroller",[0])}}),O=0,q.on("touchend click.xdsoft","td",function(t){t.stopPropagation(),O+=1;var o=e(this),a=I.currentTime;return(void 0===a||null===a)&&(I.currentTime=I.now(),a=I.currentTime),o.hasClass("xdsoft_disabled")?!1:(a.setDate(1),a.setFullYear(o.data("year")),a.setMonth(o.data("month")),a.setDate(o.data("date")),W.trigger("select.xdsoft",[a]),n.val(I.str()),C.onSelectDate&&e.isFunction(C.onSelectDate)&&C.onSelectDate.call(W,I.currentTime,W.data("input"),t),W.data("changed",!0),W.trigger("xchange.xdsoft"),W.trigger("changedatetime.xdsoft"),(O>1||C.closeOnDateSelect===!0||C.closeOnDateSelect===!1&&!C.timepicker)&&!C.inline&&W.trigger("close.xdsoft"),void setTimeout(function(){O=0},200))}),V.on("touchend click.xdsoft","div",function(t){t.stopPropagation();var n=e(this),o=I.currentTime;return(void 0===o||null===o)&&(I.currentTime=I.now(),o=I.currentTime),n.hasClass("xdsoft_disabled")?!1:(o.setHours(n.data("hour")),o.setMinutes(n.data("minute")),W.trigger("select.xdsoft",[o]),W.data("input").val(I.str()),C.onSelectTime&&e.isFunction(C.onSelectTime)&&C.onSelectTime.call(W,I.currentTime,W.data("input"),t),W.data("changed",!0),W.trigger("xchange.xdsoft"),W.trigger("changedatetime.xdsoft"),void(C.inline!==!0&&C.closeOnTimeSelect===!0&&W.trigger("close.xdsoft")))}),A.on("mousewheel.xdsoft",function(e){return C.scrollMonth?(e.deltaY<0?I.nextMonth():I.prevMonth(),!1):!0}),n.on("mousewheel.xdsoft",function(e){return C.scrollInput?!C.datepicker&&C.timepicker?(Y=V.find(".xdsoft_current").length?V.find(".xdsoft_current").eq(0).index():0,Y+e.deltaY>=0&&Y+e.deltaY<V.children().length&&(Y+=e.deltaY),V.children().eq(Y).length&&V.children().eq(Y).trigger("mousedown"),!1):C.datepicker&&!C.timepicker?(A.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),n.val&&n.val(I.str()),W.trigger("changedatetime.xdsoft"),!1):void 0:!0}),W.on("changedatetime.xdsoft",function(t){if(C.onChangeDateTime&&e.isFunction(C.onChangeDateTime)){var n=W.data("input");C.onChangeDateTime.call(W,I.currentTime,n,t),delete C.value,n.trigger("change")}}).on("generate.xdsoft",function(){C.onGenerate&&e.isFunction(C.onGenerate)&&C.onGenerate.call(W,I.currentTime,W.data("input")),$&&(W.trigger("afterOpen.xdsoft"),$=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),Y=0,H=function(){var t,n=W.data("input").offset(),o=n.top+W.data("input")[0].offsetHeight-1,a=n.left,i="absolute";"rtl"==W.data("input").parent().css("direction")&&(a-=W.outerWidth()-W.data("input").outerWidth()),C.fixed?(o-=e(window).scrollTop(),a-=e(window).scrollLeft(),i="fixed"):(o+W[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(o=n.top-W[0].offsetHeight+1),0>o&&(o=0),a+W[0].offsetWidth>e(window).width()&&(a=e(window).width()-W[0].offsetWidth)),t=W[0];do if(t=t.parentNode,"relative"===window.getComputedStyle(t).getPropertyValue("position")&&e(window).width()>=t.offsetWidth){a-=(e(window).width()-t.offsetWidth)/2;break}while("HTML"!==t.nodeName);W.css({left:a,top:o,position:i})},W.on("open.xdsoft",function(t){var n=!0;C.onShow&&e.isFunction(C.onShow)&&(n=C.onShow.call(W,I.currentTime,W.data("input"),t)),n!==!1&&(W.show(),H(),e(window).off("resize.xdsoft",H).on("resize.xdsoft",H),C.closeOnWithoutClick&&e([document.body,window]).on("touchstart mousedown.xdsoft",function o(){W.trigger("close.xdsoft"),e([document.body,window]).off("touchstart mousedown.xdsoft",o)}))}).on("close.xdsoft",function(t){var n=!0;B.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),C.onClose&&e.isFunction(C.onClose)&&(n=C.onClose.call(W,I.currentTime,W.data("input"),t)),n===!1||C.opened||C.inline||W.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(){W.trigger(W.is(":visible")?"close.xdsoft":"open.xdsoft")}).data("input",n),L=0,G=0,W.data("xdsoft_datetime",I),W.setOptions(C),I.setCurrentTime(i()),n.data("xdsoft_datetimepicker",W).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){n.is(":disabled")||n.data("xdsoft_datetimepicker").is(":visible")&&C.closeOnInputClick||(clearTimeout(L),L=setTimeout(function(){n.is(":disabled")||($=!0,I.setCurrentTime(i()),W.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var n,o=(this.value,t.which);return-1!==[m].indexOf(o)&&C.enterLikeTab?(n=e("input:visible,textarea:visible,button:visible,a:visible"),W.trigger("close.xdsoft"),n.eq(n.index(this)+1).focus(),!1):-1!==[D].indexOf(o)?(W.trigger("close.xdsoft"),!0):void 0})},s=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft touchstart"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===u&&(S=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===u&&(S=!1)}),this.each(function(){var t,n=e(this).data("xdsoft_datetimepicker");if(n){if("string"===e.type(o))switch(o){case"show":e(this).select().focus(),n.trigger("open.xdsoft");break;case"hide":n.trigger("close.xdsoft");break;case"toggle":n.trigger("toggle.xdsoft");break;case"destroy":s(e(this));break;case"reset":this.value=this.defaultValue,this.value&&n.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,C.format))||n.data("changed",!1),n.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t=n.data("input"),t.trigger("blur.xdsoft")}else n.setOptions(o);return 0}"string"!==e.type(o)&&(!C.lazyInit||C.open||C.inline?i(e(this)):O(e(this)))})},e.fn.datetimepicker.defaults=n});